{% extends 'sacrament/records_view.html' %} 
{% load render_table from django_tables2 %}

{% load static %} 


{% block header %} Baptismal Records {% endblock %} 


{% block records %}
    {% render_table table %}
    <script>
        //$(".status:contains('Pending')").attr("style","color:#d8a302;font-weight:600")
    </script>
{% endblock %}

{% block callback_function %}
    <script>
        var response_text = '';
        
        function approve() {
            $.post('localhost:8000/sacrament/post/registry', $('#approve-form').serialize(),
            {
                type: 'POST',
                beforeSend: function(xhr){xhr.setRequestHeader("X-CSRFToken", Cookies.get('csrftoken'))}
            }
            )
        }

        function loadBaptismRecords() {
            $("#sponsors-body").html("");
            var data = response_text;
            $("#name").html(data.name + (data.suffix ? data.suffix : ''));
            $("#birthdate").html(data.birthdate)
            $("#minister").html(data.minister);
            $("#legitimacy").html(data.legitimacy);
            $("#birthplace").html(data.birthplace);
            $("#gender").html(data.gender);
            $("#status").html(data.status);
            if (data.sponsors.length === 0) {
                $("#sponsors-body").html(
                    `
                                <tr scope="row" class="us even">
                                        <td colspan="2" class="text-center">No items to show.</td>
                                </tr>
                            `
                );
            } else {
                last_id = selected_row_id;
                data.sponsors.forEach(function (element) {
                    $("#sponsors-body").html(
                        $("#sponsors-body").html() + `
                                <tr scope="row" class="us even">
                                        <td>${element.name}</td>
                                        <td class="status">${element.residence}</td>
                                </tr>
                            `
                    )
                });
            }
        }

        $(document).ready(function() {
            $('.minister-dropdown').select2({
                dropdownParent: $('#approve-modal'),
                width: "100%"
            });
        });

    </script>
{% endblock %}

{% block callback_name %}
    sendAjax(loadBaptismRecords, 'baptism')
{% endblock %}


{% block modal_body %}

<div class="row">
    <!---->
    <div class="col-md-2">
        <p class="label">Name</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="name">name_text</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Birthdate</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="birthdate">birthdate_text</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Minister</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="minister">minister_text</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Legitimacy</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="legitimacy">legitimacy_text</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Birthplace</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="birthplace">birthplace_text</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Gender</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="gender">gender_text</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Status</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="status">status_text</p>
    </div>
    <!---->
    <div class="col-md-6">
        <p class="value" id="minister_choices">minister_text</p>
    </div>
</div>


<div class="row mt-2" >
    
    <div class="col">
    <h5 class="d-inline">Record Numbers</h5> <a class="pl-2" href="#"><i class="fa fa-edit"></i> Edit Record Numbers</a>
        <hr />  
    </div>   
</div>

<div class="row">
    <!---->
    <div class="col-md-2">
        <p class="label">Registry number</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="registry_number">registry_number</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Record number</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="record_number">record_number</p>
    </div>
    <!---->
    <div class="col-md-2">
        <p class="label">Page number</p>
    </div>
    <div class="col-md-4">
        <p class="value" id="page_number">page_number</p>
    </div>
    <!---->

</div>
    



<div class="row mt-2" >
    <div class="col">
    <p class="label text-uppercase">Sponsors</p>
        <hr />  
    </div>   
</div>
<table class="table table-hover table-bordered" id="sponsors-table">
                <thead class="thead-default theading">
                <tr>
                    <th>
                           Name
                    </th>
                    <th> 
                            Residence
                    </th>
                </tr>
                </thead>
                <tbody id="sponsors-body">

                    
                </tbody>
        </table>
<button id="test_button"> test </button>


<script>
var test_button = document.getElementById("test_button");
test_button.addEventListener("click",getMinisters());
</script>
{% endblock %}

{% block modal_title %}
Baptismal Record
{% endblock %}












































































{% block approve_modal_content%}

    <form id="approve-form">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Approve Record</h5>
            
                
            <button  type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="approve-modal-body p-3">
            <div class="row">
                <div class="col">
                    <p><small>Please review and confirm the following details to complete the approval of the baptism.</small></p>
                </div>
            </div>


            <div class="row">
                <div class="col"> 
                    <h5>Baptismal Record</h5>
                    <hr />
                </div>
            </div>
            <div class="ml-3 mr-4">
                <div class="row">
                    <div class="col-3">
                        <label for="input-first-name">First name</label>
                        <input type="text" class="form-control" id="input-first-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-middle-name">Middle name</label>
                        <input type="text" class="form-control" id="input-middle-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Last name</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Suffix (Optional)</label>
                        <input type="text" class="form-control" id="input-suffix" placeholder="Suffix">
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-3">
                        <label for="input-first-name">Gender</label>
                        <input type="text" class="form-control" id="input-first-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-middle-name">Birthdate</label>
                        <input type="text" class="form-control" id="input-middle-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Birthplace</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Legitimacy</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="Suffix">
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-4">
                        <label for="ministers">Minister</label><br />
                        <select class="minister-dropdown" id="ministers">
                        </select>
                    </div>
                    <div class="col-4">
                        <label for="input-last-name">Status</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="Suffix">
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col"> 
                    <h5>Parent Details</h5>
                    <hr />
                </div>
            </div>
            <div class="ml-3 mr-4">
                <div class="row">
                    <div class="col-3">
                        <label for="input-first-name">Mother's First name</label>
                        <input type="text" class="form-control" id="input-first-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-middle-name">Mother's Middle name</label>
                        <input type="text" class="form-control" id="input-middle-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Mother's Last name</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Mother's Suffix</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="Suffix">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-3">
                        <label for="input-first-name">Father's First name</label>
                        <input type="text" class="form-control" id="input-first-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-middle-name">Father's Middle name</label>
                        <input type="text" class="form-control" id="input-middle-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Father's Last name</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="First name">
                    </div>
                    <div class="col-3">
                        <label for="input-last-name">Father's Suffix</label>
                        <input type="text" class="form-control" id="input-last-name" placeholder="Suffix">
                    </div>
                </div>
            </div>

            
            <div class="row mt-3">
                <div class="col"> 
                    <h5>Bookkeeping</h5>
                    <hr />
                </div>
            </div>
            <div class="ml-3 mr-4">
                <div class="row">
                    <div class="col-3">
                        <label for="registry-input">Registry number</label>
                        <input type="text" class="form-control" id="registry-input" aria-describedby="emailHelp" placeholder="Registry number">
                    </div>
                    <div class="col-3">
                        <label for="record-input">Record number</label>
                        <input type="text" class="form-control" id="record-input" placeholder="Record number">
                    </div>
                    <div class="col-3">
                        <label for="page-input">Page number</label>
                        <input type="text" class="form-control" id="page-input" placeholder="Page number">
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col"> 
                    <h5>Sponsors</h5>
                    <hr />
                </div>
            </div>

            <table class="table table-hover table-bordered selectable-table" id="sponsors-table-edit">
                <thead class="thead-default theading">
                    <tr>
                        <th>Name</th>
                        <th>Residence</th>
                    </tr>
                </thead>
                <tbody id="sponsors-body">
                    <!--Sponsors Content Here: Use JQUERY TO FILL IN DETAILS-->
                </tbody>
            </table>


        </div>
        
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="updateRegistry()">Done</button>
        </div>
        </div>
    </form>

    
{% endblock %}